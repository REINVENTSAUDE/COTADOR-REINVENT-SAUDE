<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cotador HAPVIDA - REINVENT SAÚDE</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
}

.container {
    max-width: 900px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 10px;
}

h1 {
    text-align: center;
    color: #0d6efd;
}

.subtitle {
    text-align: center;
    margin-bottom: 20px;
    font-size: 14px;
    color: #666;
}

.planos {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}

.plano-btn {
    flex: 1 1 48%;
    padding: 12px;
    border: 2px solid #0d6efd;
    border-radius: 8px;
    background: #fff;
    color: #0d6efd;
    cursor: pointer;
    font-weight: bold;
}

.plano-btn.active {
    background: #0d6efd;
    color: #fff;
}

label {
    font-weight: bold;
}

input {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 16px;
}

input.error {
    border: 2px solid red;
}

.error-text {
    color: red;
    font-size: 13px;
    display: none;
}

button.calcular {
    width: 100%;
    margin-top: 15px;
    padding: 12px;
    background: #0d6efd;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
}

.resultado {
    margin-top: 25px;
    display: none;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
}

th {
    background: #e9ecef;
}

.totais {
    margin-top: 15px;
    font-size: 18px;
    font-weight: bold;
}
</style>
</head>

<body>

<div class="container">

<h1>Cotador HAPVIDA</h1>
<div class="subtitle">Cotador exclusivo – REINVENT SAÚDE</div>

<div class="planos" id="planos">
    <button class="plano-btn" data-plano="enf_parcial">Enfermaria Copart. Parcial</button>
    <button class="plano-btn" data-plano="enf_total">Enfermaria Copart. Total</button>
    <button class="plano-btn" data-plano="apt_parcial">Apartamento Copart. Parcial</button>
    <button class="plano-btn" data-plano="apt_total">Apartamento Copart. Total</button>
    <button class="plano-btn" data-plano="super_parcial">Super Simples Enfermaria Parcial</button>
    <button class="plano-btn" data-plano="super_total">Super Simples Enfermaria Total</button>
</div>

<label>Idade(s)</label>
<input type="text" id="idades" placeholder="Ex: 34 ou 34, 29, 5">
<div class="error-text" id="erroTexto">Preencha somente números e vírgulas. Ex: 34 ou 34, 29, 5</div>

<button class="calcular" onclick="calcular()">Calcular</button>

<div class="resultado" id="resultado">
    <table>
        <thead>
            <tr>
                <th>Faixa etária</th>
                <th>Idade</th>
                <th>Valor normal</th>
                <th>15% (3 primeiros meses)</th>
            </tr>
        </thead>
        <tbody id="tabelaResultado"></tbody>
    </table>

    <div class="totais">
        Total normal: <span id="totalNormal"></span><br>
        Total com 15%: <span id="total15"></span>
    </div>
</div>

</div>

<script>
let planoSelecionado = null;

const planos = document.querySelectorAll('.plano-btn');
planos.forEach(btn => {
    btn.addEventListener('click', () => {
        planos.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        planoSelecionado = btn.dataset.plano;
    });
});

// TABELAS DE VALORES (resumo simplificado – você pode trocar depois)
const tabela = {
    enf_parcial: [
        {faixa:"00-18", min:0, max:18, normal:241.68, d15:205.43, odonto:true},
        {faixa:"19-23", min:19, max:23, normal:311.18, d15:264.50, odonto:true},
        {faixa:"24-28", min:24, max:28, normal:354.18, d15:301.05, odonto:true},
        {faixa:"29-33", min:29, max:33, normal:393.74, d15:334.68, odonto:true},
        {faixa:"34-38", min:34, max:38, normal:412.20, d15:350.37, odonto:true},
        {faixa:"39-43", min:39, max:43, normal:462.60, d15:393.21, odonto:true},
        {faixa:"44-48", min:44, max:48, normal:558.98, d15:475.13, odonto:true},
        {faixa:"49-53", min:49, max:53, normal:762.08, d15:647.77, odonto:true},
        {faixa:"54-58", min:54, max:58, normal:1020.23, d15:867.20, odonto:true},
        {faixa:"59+", min:59, max:120, normal:1318.95, d15:1121.11, odonto:true}
    ],
    super_parcial: [
        {faixa:"00-18", min:0, max:18, normal:187.76, d15:159.60, odonto:false},
        {faixa:"19-23", min:19, max:23, normal:210.29, d15:178.75, odonto:false},
        {faixa:"24-28", min:24, max:28, normal:235.52, d15:200.19, odonto:false},
        {faixa:"29-33", min:29, max:33, normal:270.85, d15:230.22, odonto:false},
        {faixa:"34-38", min:34, max:38, normal:311.48, d15:264.76, odonto:false},
        {faixa:"39-43", min:39, max:43, normal:370.66, d15:315.06, odonto:false},
        {faixa:"44-48", min:44, max:48, normal:463.33, d15:393.83, odonto:false},
        {faixa:"49-53", min:49, max:53, normal:579.16, d15:492.29, odonto:false},
        {faixa:"54-58", min:54, max:58, normal:984.57, d15:836.88, odonto:false},
        {faixa:"59+", min:59, max:120, normal:1102.72, d15:937.31, odonto:false}
    ]
};

function calcular() {
    const input = document.getElementById('idades');
    const erro = document.getElementById('erroTexto');
    const resultadoDiv = document.getElementById('resultado');
    const tabelaResultado = document.getElementById('tabelaResultado');

    const valor = input.value.trim();

    if (!planoSelecionado || !/^[0-9,\s]+$/.test(valor)) {
        input.classList.add('error');
        erro.style.display = 'block';
        resultadoDiv.style.display = 'none';
        return;
    }

    input.classList.remove('error');
    erro.style.display = 'none';

    const idades = valor.split(',').map(v => parseInt(v.trim())).filter(v => !isNaN(v));

    let totalNormal = 0;
    let total15 = 0;

    tabelaResultado.innerHTML = "";

    idades.forEach(idade => {
        const faixa = tabela[planoSelecionado].find(f => idade >= f.min && idade <= f.max);
        if (faixa) {
            totalNormal += faixa.normal;
            total15 += faixa.d15;

            tabelaResultado.innerHTML += `
                <tr>
                    <td>${faixa.faixa}</td>
                    <td>${idade}</td>
                    <td>R$ ${faixa.normal.toFixed(2)}</td>
                    <td>R$ ${faixa.d15.toFixed(2)}</td>
                </tr>
            `;
        }
    });

    document.getElementById('totalNormal').innerText = "R$ " + totalNormal.toFixed(2);
    document.getElementById('total15').innerText = "R$ " + total15.toFixed(2);

    resultadoDiv.style.display = 'block';
}
</script>

</body>
</html>
