<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cotador HAPVIDA - Fortaleza/CE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; background:#f5f7fb; margin:0; padding:10px;}
.container { max-width:900px; margin:auto; background:#fff; border-radius:10px; padding:15px; box-shadow:0 0 10px rgba(0,0,0,0.1);}
.header { display:flex; justify-content:space-between; align-items:center;}
.header img { height:50px;}
h1 { text-align:center; color:#005baa; margin:10px 0;}
.planos { display:grid; grid-template-columns:repeat(2,1fr); gap:10px;}
.botao-plano { padding:10px; border:2px solid #005baa; border-radius:6px; background:#fff; color:#005baa; font-weight:bold; cursor:pointer;}
.botao-plano.ativo { background:#005baa; color:#fff;}
.idades textarea { width:100%; height:60px; padding:10px; border-radius:6px; border:2px solid #ccc;}
.checkbox { margin:10px 0;}
button.calcular { width:100%; padding:12px; background:#28a745; border:none; border-radius:6px; color:#fff; font-size:16px; cursor:pointer;}
.resultado { margin-top:15px; display:none;}
table { width:100%; border-collapse:collapse; font-size:14px;}
th, td { padding:8px; border:1px solid #ddd; text-align:center;}
th { background:#005baa; color:#fff;}
.totais { margin-top:10px; font-weight:bold;}
.download { margin-top:10px;}
@media (max-width:600px) {
  .header img { height:40px;}
  table { font-size:12px;}
}
</style>
</head>

<body>
<div class="container" id="printArea">

<div class="header">
  <img src="logo-reinvent.png">
  <img src="logo-hapvida.png">
</div>

<h1>Cotador HAPVIDA – Fortaleza/CE</h1>

<div class="planos">
  <button class="botao-plano" onclick="selecionarPlano('enf_parcial')">Enfermaria Parcial</button>
  <button class="botao-plano" onclick="selecionarPlano('enf_total')">Enfermaria Total</button>
  <button class="botao-plano" onclick="selecionarPlano('amb_parcial')">Ambulatorial Parcial</button>
  <button class="botao-plano" onclick="selecionarPlano('amb_total')">Ambulatorial Total</button>
  <button class="botao-plano" onclick="selecionarPlano('apto_parcial')">Apartamento Parcial</button>
  <button class="botao-plano" onclick="selecionarPlano('apto_total')">Apartamento Total</button>
  <button class="botao-plano" onclick="selecionarPlano('super_parcial')">Super Simples Parcial</button>
  <button class="botao-plano" onclick="selecionarPlano('super_total')">Super Simples Total</button>
</div>

<div class="idades">
  <textarea id="idades" placeholder="Digite as idades separadas por vírgula. Ex: 23, 35, 62"></textarea>
</div>

<div class="checkbox">
  <label><input type="checkbox" id="parentesco"> Parentesco 1º grau (5% após 3 meses)</label>
</div>

<button class="calcular" onclick="calcular()">Calcular Orçamento</button>

<div class="resultado" id="resultado">
  <h2 id="nomePlano"></h2>

  <table>
    <thead>
      <tr>
        <th>Faixa Etária</th>
        <th>Idade</th>
        <th>Valor Normal</th>
        <th>15% (3 meses)</th>
      </tr>
    </thead>
    <tbody id="tabelaResultado"></tbody>
  </table>

  <div class="totais" id="totais"></div>

  <div class="download">
    <button onclick="baixarImagem()">Baixar Orçamento (Imagem)</button>
  </div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
let planoSelecionado = null;

const tabelas = {
  enf_parcial: { nome:"Enfermaria Coparticipação Parcial", dados:[
    ["00 a 18",0,18,241.68,205.43],["19 a 23",19,23,311.18,264.50],["24 a 28",24,28,354.18,301.05],
    ["29 a 33",29,33,393.74,334.68],["34 a 38",34,38,412.20,350.37],["39 a 43",39,43,462.60,393.21],
    ["44 a 48",44,48,558.98,475.13],["49 a 53",49,53,762.08,647.77],["54 a 58",54,58,1020.23,867.20],
    ["59+",59,200,1318.95,1121.11]
  ]},
  enf_total: { nome:"Enfermaria Coparticipação Total", dados:[
    ["00 a 18",0,18,198.23,168.50],["19 a 23",19,23,253.82,215.75],["24 a 28",24,28,288.22,244.99],
    ["29 a 33",29,33,319.87,271.89],["34 a 38",34,38,334.64,284.44],["39 a 43",39,43,374.96,318.72],
    ["44 a 48",44,48,452.06,384.25],["49 a 53",49,53,614.53,522.35],["54 a 58",54,58,821.04,697.88],
    ["59+",59,200,1060.00,901.00]
  ]},
  amb_parcial: { nome:"Ambulatorial Coparticipação Parcial", dados:[
    ["00 a 18",0,18,202.80,172.38],["19 a 23",19,23,267.06,227.00],["24 a 28",24,28,304.44,258.77],
    ["29 a 33",29,33,339.61,288.67],["34 a 38",34,38,357.41,303.80],["39 a 43",39,43,401.25,341.06],
    ["44 a 48",44,48,490.67,417.07],["49 a 53",49,53,680.53,578.45],["54 a 58",54,58,917.37,779.76],
    ["59+",59,200,1191.43,1012.72]
  ]},
  amb_total: { nome:"Ambulatorial Coparticipação Total", dados:[
    ["00 a 18",0,18,130.22,110.69],["19 a 23",19,23,171.04,145.38],["24 a 28",24,28,194.78,165.56],
    ["29 a 33",29,33,217.12,184.55],["34 a 38",34,38,228.42,194.16],["39 a 43",39,43,256.27,217.83],
    ["44 a 48",44,48,313.06,266.10],["49 a 53",49,53,433.65,368.60],["54 a 58",54,58,584.08,496.47],
    ["59+",59,200,758.15,644.43]
  ]},
  apto_parcial: { nome:"Apartamento Coparticipação Parcial", dados:[
    ["00 a 18",0,18,350.27,297.73],["19 a 23",19,23,454.52,386.34],["24 a 28",24,28,519.02,441.17],
    ["29 a 33",29,33,578.36,491.61],["34 a 38",34,38,606.05,515.14],["39 a 43",39,43,681.65,579.40],
    ["44 a 48",44,48,826.22,702.29],["49 a 53",49,53,1130.87,961.24],["54 a 58",54,58,1518.10,1290.39],
    ["59+",59,200,1966.18,1671.25]
  ]},
  apto_total: { nome:"Apartamento Coparticipação Total", dados:[
    ["00 a 18",0,18,285.10,242.34],["19 a 23",19,23,368.49,313.22],["24 a 28",24,28,420.09,357.08],
    ["29 a 33",29,33,467.56,397.43],["34 a 38",34,38,489.71,416.25],["39 a 43",39,43,550.19,467.66],
    ["44 a 48",44,48,665.84,565.96],["49 a 53",49,53,909.55,773.12],["54 a 58",54,58,1219.32,1036.42],
    ["59+",59,200,1577.77,1341.10]
  ]},
  super_parcial: { nome:"Super Simples Enfermaria Parcial", dados:[
    ["00 a 18",0,18,187.76,159.60],["19 a 23",19,23,210.29,178.75],["24 a 28",24,28,235.52,200.19],
    ["29 a 33",29,33,270.85,230.22],["34 a 38",34,38,311.48,264.76],["39 a 43",39,43,370.66,315.06],
    ["44 a 48",44,48,463.33,393.83],["49 a 53",49,53,579.16,492.29],["54 a 58",54,58,984.57,836.88],
    ["59+",59,200,1102.72,937.31]
  ]},
  super_total: { nome:"Super Simples Enfermaria Total", dados:[
    ["00 a 18",0,18,146.72,124.71],["19 a 23",19,23,164.33,139.68],["24 a 28",24,28,184.05,156.44],
    ["29 a 33",29,33,211.66,179.91],["34 a 38",34,38,243.41,206.90],["39 a 43",39,43,289.66,246.21],
    ["44 a 48",44,48,362.08,307.77],["49 a 53",49,53,452.60,384.71],["54 a 58",54,58,769.42,654.01],
    ["59+",59,200,861.75,732.49]
  ]}
};

function selecionarPlano(plano){
  planoSelecionado = plano;
  document.querySelectorAll('.botao-plano').forEach(b=>b.classList.remove('ativo'));
  event.target.classList.add('ativo');
}

function calcular(){
  if(!planoSelecionado) return alert("Selecione um plano.");
  const idades = document.getElementById("idades").value.split(",").map(i=>parseInt(i.trim())).filter(i=>!isNaN(i));
  const tbody = document.getElementById("tabelaResultado");
  tbody.innerHTML = "";
  let totalNormal = 0;
  let totalPromo = 0;

  idades.forEach(idade=>{
    const faixa = tabelas[planoSelecionado].dados.find(f=>idade>=f[1] && idade<=f[2]);
    if(faixa){
      totalNormal += faixa[3];
      totalPromo += faixa[4];
      const tr = document.createElement("tr");
      tr.innerHTML = <td>${faixa[0]}</td><td>${idade}</td><td>R$ ${faixa[3].toFixed(2)}</td><td>R$ ${faixa[4].toFixed(2)}</td>;
      tbody.appendChild(tr);
    }
  });

  let texto = Total Normal: R$ ${totalNormal.toFixed(2)}<br>Total 15% (3 meses): R$ ${totalPromo.toFixed(2)};

  if(document.getElementById("parentesco").checked && idades.length>=2){
    let familiar = totalNormal * 0.95;
    texto += <br>Após 3 meses (5% familiar): R$ ${familiar.toFixed(2)};
  }

  document.getElementById("nomePlano").innerText = tabelas[planoSelecionado].nome;
  document.getElementById("totais").innerHTML = texto;
  document.getElementById("resultado").style.display = "block";
}

function baixarImagem(){
  html2canvas(document.getElementById("printArea")).then(canvas=>{
    const link = document.createElement("a");
    link.download = "orcamento_hapvida.png";
    link.href = canvas.toDataURL();
    link.click();
  });
}
</script>

</body>
</html>
