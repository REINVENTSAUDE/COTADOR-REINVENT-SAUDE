<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cotador HAPVIDA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background:#f5f7fb;
  padding:10px;
}

.container {
  max-width:900px;
  margin:auto;
  background:#fff;
  border-radius:12px;
  padding:15px;
}

h1 {
  text-align:center;
  color:#005baa;
  margin-bottom:15px;
}

/* ===== PLANOS ===== */
.planos {
  display:grid;
  gap:14px;
}

.grupo-plano {
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:10px;
}

.tipo, .opcao {
  border:2px solid #005baa;
  border-radius:8px;
  background:#fff;
  color:#005baa;
  font-weight:bold;
  cursor:pointer;
  transition:all .25s ease;
}

.tipo {
  font-size:16px;
}

.opcoes {
  display:grid;
  grid-template-rows:1fr 1fr;
  gap:8px;
}

.tipo:hover, .opcao:hover {
  transform:scale(1.03);
}

.tipo.ativo, .opcao.ativo {
  background:#005baa;
  color:#fff;
  box-shadow:0 6px 14px rgba(0,91,170,.35);
  transform:scale(1.05);
}

/* ===== FORM ===== */
textarea {
  width:100%;
  height:40px;
  margin-top:12px;
  padding:8px;
  resize:none;
  border-radius:6px;
}

button.calcular {
  width:100%;
  margin-top:12px;
  padding:12px;
  background:#005baa;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
}

/* ===== RESULTADO ===== */
#resultado {
  display:none;
  margin-top:20px;
}

table {
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th, td {
  border:1px solid #ddd;
  padding:6px;
  text-align:center;
}

th {
  background:#005baa;
  color:#fff;
}

#total {
  margin-top:10px;
  font-weight:bold;
}

button.share {
  margin-top:10px;
  padding:10px;
  width:100%;
  border:none;
  border-radius:6px;
  background:#28a745;
  color:#fff;
  font-size:15px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">

<h1>Cotador HAPVIDA</h1>

<div class="planos">

  <div class="grupo-plano">
    <button class="tipo" onclick="setTipo('enf', this)">ENFERMARIA</button>
    <div class="opcoes">
      <button class="opcao" onclick="setModo('parcial', this)">PARCIAL</button>
      <button class="opcao" onclick="setModo('total', this)">TOTAL</button>
    </div>
  </div>

  <div class="grupo-plano">
    <button class="tipo" onclick="setTipo('amb', this)">AMBULATORIAL</button>
    <div class="opcoes">
      <button class="opcao" onclick="setModo('parcial', this)">PARCIAL</button>
      <button class="opcao" onclick="setModo('total', this)">TOTAL</button>
    </div>
  </div>

  <div class="grupo-plano">
    <button class="tipo" onclick="setTipo('apto', this)">APARTAMENTO</button>
    <div class="opcoes">
      <button class="opcao" onclick="setModo('parcial', this)">PARCIAL</button>
      <button class="opcao" onclick="setModo('total', this)">TOTAL</button>
    </div>
  </div>

  <div class="grupo-plano">
    <button class="tipo" onclick="setTipo('super', this)">SUPER SIMPLES</button>
    <div class="opcoes">
      <button class="opcao" onclick="setModo('parcial', this)">PARCIAL</button>
      <button class="opcao" onclick="setModo('total', this)">TOTAL</button>
    </div>
  </div>

</div>

<textarea id="idades" placeholder="Digite as idades separadas por vírgula. Ex: 23, 35, 62"></textarea>

<button class="calcular" onclick="calcular()">Calcular Orçamento</button>

<div id="resultado">
  <h2 id="nomePlano"></h2>

  <div id="areaImagem">
    <table>
      <thead>
        <tr>
          <th>Faixa</th>
          <th>Idade</th>
          <th>Valor</th>
        </tr>
      </thead>
      <tbody id="tabela"></tbody>
    </table>
    <div id="total"></div>
  </div>

  <button class="share" onclick="compartilhar()">Compartilhar Orçamento</button>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
let tipo = null;
let modo = null;

const tabelas = {
  enf_parcial:[["0-18",0,18,241.68],["19-23",19,23,311.18],["24-28",24,28,354.18],["29-33",29,33,393.74],["34-38",34,38,412.20],["39-43",39,43,462.60],["44-48",44,48,558.98],["49-53",49,53,762.08],["54-58",54,58,1020.23],["59+",59,200,1318.95]],
  enf_total:[["0-18",0,18,198.23],["19-23",19,23,253.82],["24-28",24,28,288.22],["29-33",29,33,319.87],["34-38",34,38,334.64],["39-43",39,43,374.96],["44-48",44,48,452.06],["49-53",49,53,614.53],["54-58",54,58,821.04],["59+",59,200,1060.00]],
  amb_parcial:[["0-18",0,18,202.80],["19-23",19,23,267.06],["24-28",24,28,304.44],["29-33",29,33,339.61],["34-38",34,38,357.41],["39-43",39,43,401.25],["44-48",44,48,490.67],["49-53",49,53,680.53],["54-58",54,58,917.37],["59+",59,200,1191.43]],
  amb_total:[["0-18",0,18,130.22],["19-23",19,23,171.04],["24-28",24,28,194.78],["29-33",29,33,217.12],["34-38",34,38,228.42],["39-43",39,43,256.27],["44-48",44,48,313.06],["49-53",49,53,433.65],["54-58",54,58,584.08],["59+",59,200,758.15]],
  apto_parcial:[["0-18",0,18,350.27],["19-23",19,23,454.52],["24-28",24,28,519.02],["29-33",29,33,578.36],["34-38",34,38,606.05],["39-43",39,43,681.65],["44-48",44,48,826.22],["49-53",49,53,1130.87],["54-58",54,58,1518.10],["59+",59,200,1966.18]],
  apto_total:[["0-18",0,18,285.10],["19-23",19,23,368.49],["24-28",24,28,420.09],["29-33",29,33,467.56],["34-38",34,38,489.71],["39-43",39,43,550.19],["44-48",44,48,665.84],["49-53",49,53,909.55],["54-58",54,58,1219.32],["59+",59,200,1577.77]],
  super_parcial:[["0-18",0,18,187.76],["19-23",19,23,210.29],["24-28",24,28,235.52],["29-33",29,33,270.85],["34-38",34,38,311.48],["39-43",39,43,370.66],["44-48",44,48,463.33],["49-53",49,53,579.16],["54-58",54,58,984.57],["59+",59,200,1102.72]],
  super_total:[["0-18",0,18,146.72],["19-23",19,23,164.33],["24-28",24,28,184.05],["29-33",29,33,211.66],["34-38",34,38,243.41],["39-43",39,43,289.66],["44-48",44,48,362.08],["49-53",49,53,452.60],["54-58",54,58,769.42],["59+",59,200,861.75]]
};

function resetResultado(){
  document.getElementById("resultado").style.display="none";
}

function setTipo(t, btn){
  tipo=t;
  document.querySelectorAll(".tipo").forEach(b=>b.classList.remove("ativo"));
  btn.classList.add("ativo");
  resetResultado();
}

function setModo(m, btn){
  modo=m;
  document.querySelectorAll(".opcao").forEach(b=>b.classList.remove("ativo"));
  btn.classList.add("ativo");
  resetResultado();
}

function calcular(){
  if(!tipo || !modo) return alert("Selecione o plano completo.");
  const idades=document.getElementById("idades").value.split(",").map(i=>parseInt(i.trim())).filter(i=>!isNaN(i));
  const chave=tipo+"_"+modo;
  let total=0;
  let tbody=document.getElementById("tabela");
  tbody.innerHTML="";
  idades.forEach(idade=>{
    let f=tabelas[chave].find(x=>idade>=x[1]&&idade<=x[2]);
    if(f){
      total+=f[3];
      tbody.innerHTML+=`<tr><td>${f[0]}</td><td>${idade}</td><td>R$ ${f[3].toFixed(2)}</td></tr>`;
    }
  });
  document.getElementById("nomePlano").innerText=tipo.toUpperCase()+" "+modo.toUpperCase();
  document.getElementById("total").innerText="Total: R$ "+total.toFixed(2);
  document.getElementById("resultado").style.display="block";
}

function compartilhar(){
  html2canvas(document.getElementById("areaImagem")).then(canvas=>{
    canvas.toBlob(blob=>{
      const file=new File([blob],"orcamento.png",{type:"image/png"});
      if(navigator.share){
        navigator.share({files:[file],title:"Orçamento HAPVIDA"});
      }else{
        const a=document.createElement("a");
        a.href=URL.createObjectURL(blob);
        a.download="orcamento.png";
        a.click();
      }
    });
  });
}
</script>

</body>
</html>
